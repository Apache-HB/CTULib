cxx_library(
    name = 'CthulhuMeta',
    exported_headers = subdir_glob([
        ('Cthulhu/Meta', '**/*.h')
    ]),
    header_namespace = 'Cthulhu/Meta',
    headers = subdir_glob([
        ('Cthulhu/Meta', '**/*.h')
    ]),
    visibility = ['PUBLIC'],
    platform_compiler_flags = [
        ('windows.*', [ '/std:c++17' ]),
        ('[apple|linux].*', [ '-std=c++17' ])
    ]
)

cxx_library(
    name = 'CthulhuCore',
    exported_headers = subdir_glob([
        ('Cthulhu/Core', '**/*.h')
    ]),
    header_namespace = 'Cthulhu/Core',
    srcs = glob(['Cthulhu/Core/**/*.cpp']),
    headers = subdir_glob([
        ('Cthulhu/Core', '**/*.h'),
        ('Cthulhu', '**/*.h')
    ]),
    visibility = ['PUBLIC'],
    platform_compiler_flags = [
        ('windows.*', [ '/std:c++17' ]),
        ('[apple|linux].*', [ '-std=c++17' ])
    ],
    deps = [ ':CthulhuMeta' ]
)

cxx_library(
    name = 'CthulhuFileSystem',
    exported_headers = subdir_glob([
        ('Cthulhu/FileSystem', '**/*.h')
    ]),
    header_namespace = 'Cthulhu/FileSystem',
    srcs = glob(['Cthulhu/FileSystem/**/*.cpp']),
    headers = subdir_glob([
        ('Cthulhu/FileSystem', '**/*.h'),
        ('Cthulhu', '**/*.h')
    ]),
    visibility = ['PUBLIC'],
    platform_compiler_flags = [
        ('windows.*', [ '/std:c++17' ]),
        ('[apple|linux].*', [ '-std=c++17' ])
    ],
    deps = [ ':CthulhuCore' ]
)
